!function(a){"use strict";a(function(){function b(){var b=!1;return"1"===a("#billing_persontype").val()?a("#billing_cpf, #billing_rg").each(function(){""===a(this).val()&&(b=!0)}):"2"===a("#billing_persontype").val()&&a("#billing_cnpj, #billing_company, #billing_ie").each(function(){""===a(this).val()&&(b=!0)}),b}function c(c){var d=null;if(h)return"undefined"!=typeof c&&"undefined"!=typeof c.data&&("undefined"==typeof c.data.preservePagarmeCheckoutSubmitValue||c.data.preservePagarmeCheckoutSubmitValue||(h=!1)),!0;if(!a("#payment_method_pagarme-credit-card").is(":checked"))return!0;if(0<a("input[name=pagarme_checkout_token]").length)return!0;if(1===a("input#terms").length&&0===a("input#terms:checked").length)return!0;if(a("#createaccount").is(":checked")&&a("#account_password").length&&""===a("#account_password").val())return!0;if(d=a(a("#ship-to-different-address-checkbox").is(":checked")?".woocommerce-billing-fields .validate-required, .woocommerce-shipping-fields .validate-required":".woocommerce-billing-fields .validate-required"),d.length){var e=!1;if(0<a("#billing_persontype").length?(d.each(function(){""===a(this).find("input.input-text, select").not(a("#account_password, #account_username, #billing_cpf, #billing_rg, #billing_cnpj, #billing_company, #billing_ie")).val()&&(e=!0)}),e||(e=b())):d.each(function(){""===a(this).find("input.input-text, select").not(a("#account_password, #account_username")).val()&&(e=!0)}),e)return!0}return!1}function d(a){return 0<a.length}function e(a){return a.replace(/[^\d]/g,"")}function f(b){var c,f={};return f.customerName=a.trim(a("#billing_first_name",b).val()+" "+a("#billing_last_name",b).val()),f.customerEmail=a("#billing_email",b).val(),d(a("#billing_address_1"))&&(f.customerAddressStreet=a("#billing_address_1").val(),f.customerAddressCity=a("#billing_city").val(),f.customerAddressState=a("#billing_state").val(),f.customerAddressComplementary=a("#billing_address_2").val(),f.customerAddressZipcode=e(a("#billing_postcode").val()),d(a("#billing_number"))&&(f.customerAddressStreetNumber=a("#billing_number").val()),d(a("#billing_neighborhood"))&&(f.customerAddressNeighborhood=a("#billing_neighborhood").val())),d(a("#billing_phone"))&&(c=e(a("#billing_phone").val()),f.customerPhoneDdd=c.substr(0,2),f.customerPhoneNumber=c.substr(2)),d(a("#billing_persontype"))?"1"===a("#billing_persontype").val()?f.customerDocumentNumber=e(a("#billing_cpf").val()):(f.customerName=a("#billing_company").val(),f.customerDocumentNumber=e(a("#billing_cnpj").val())):d(a("#billing_cpf"))?f.customerDocumentNumber=e(a("#billing_cpf").val()):d(a("#billing_cnpj"))&&(f.customerName=a("#billing_company").val(),f.customerDocumentNumber=e(a("#billing_cnpj").val())),f}function g(){if(c())return!0;var b,d,e,g=a("form.checkout, form#order_review"),i=a("#pagarme-checkout-params",g);b=new PagarMeCheckout.Checkout({encryption_key:wcPagarmeParams.encryptionKey,success:function(b){h=!0,"no"===wcPagarmeParams.register_refused_order?(a("input[name=pagarme_checkout_token]",g).remove(),g.append(a('<input name="pagarme_checkout_token" type="hidden" />').val(b.token))):(a("input[name=pagarme_card_hash]",g).remove(),a("input[name=pagarme_installments]",g).remove(),g.append(a('<input name="pagarme_card_hash" type="hidden" />').val(b.card_hash)),g.append(a('<input name="pagarme_installments" type="hidden" />').val(b.installments))),g.submit()}}),d=wcPagarmeParams.checkoutPayPage?wcPagarmeParams.customerFields:f(g);const j="yes"===wcPagarmeParams.register_refused_order?"false":"true";return e=a.extend({},{paymentMethods:"credit_card",customerData:!1,amount:i.data("total"),createToken:j,interestRate:wcPagarmeParams.interestRate,maxInstallments:i.data("max_installment"),freeInstallments:wcPagarmeParams.freeInstallments,postbackUrl:wcPagarmeParams.postbackUrl,uiColor:wcPagarmeParams.uiColor},d),b.open(e),!1}var h=!1;a("form.checkout").on("click","#place_order",function(){return g()}),a("form.checkout").on("checkout_place_order_pagarme-credit-card",{preservePagarmeCheckoutSubmitValue:!0},c),a("form#order_review").submit(function(){return g()})})}(jQuery);