!function(a){"use strict";a(function(){function b(){var b=!1;return"1"===a("#billing_persontype").val()?a("#billing_cpf, #billing_rg").each(function(){""===a(this).val()&&(b=!0)}):"2"===a("#billing_persontype").val()&&a("#billing_cnpj, #billing_company, #billing_ie").each(function(){""===a(this).val()&&(b=!0)}),b}function c(c){var d=null;if(m)return"undefined"!=typeof c&&"undefined"!=typeof c.data&&("undefined"==typeof c.data.preservePagarmeCheckoutSubmitValue||c.data.preservePagarmeCheckoutSubmitValue||(m=!1)),!0;if(!a("#payment_method_pagarme-credit-card").is(":checked"))return!0;if(0<a("input[name=pagarme_checkout_token]").length)return!0;if(1===a("input#terms").size()&&0===a("input#terms:checked").size())return!0;if(a("#createaccount").is(":checked")&&a("#account_password").length&&""===a("#account_password").val())return!0;if(d=a(a("#ship-to-different-address-checkbox").is(":checked")?".woocommerce-billing-fields .validate-required, .woocommerce-shipping-fields .validate-required":".woocommerce-billing-fields .validate-required"),d.size()){var e=!1;if(0<a("#billing_persontype").length?(d.each(function(){""===a(this).find("input.input-text, select").not(a("#account_password, #account_username, #billing_cpf, #billing_rg, #billing_cnpj, #billing_company, #billing_ie")).val()&&(e=!0)}),e||(e=b())):d.each(function(){""===a(this).find("input.input-text, select").not(a("#account_password, #account_username")).val()&&(e=!0)}),e)return!0}return!1}function d(a){return 0<a.length}function e(a){return a.replace(/[^\d]/g,"")}function f(b){var c={};return c.customer={external_id:a("#billing_email",b).val(),name:a.trim(a("#billing_first_name",b).val()+" "+a("#billing_last_name",b).val()),email:a("#billing_email",b).val(),type:"cpf"===h()?"individual":"corporation",documents:i(),phone_numbers:g(),country:a("#billing_country").val().toLowerCase()},j()&&(c.billing=j()),k()&&(c.shipping=k()),c}function g(){var b=[];if(d(a("#billing_phone"))){var c="+55"+e(a("#billing_phone").val());b.push(c)}if(d(a("#billing_cellphone"))){var f="+55"+e(a("#billing_cellphone").val());b.push(f)}return b}function h(){return d(a("#billing_persontype"))?"1"===a("#billing_persontype").val()?"cpf":"cnpj":a("#billing_cpf")?"cpf":a("#billing_cnpj")?"cnpj":void 0}function i(){var b={},c=h(),d="#billing_cpf";return b.type=c,"cnpj"===c&&(d="#billing_cnpj"),b.number=e(a(d).val()),[b]}function j(){if(d(a("#billing_address_1"))){var b={};return b.address={street:a("#billing_address_1").val(),street_number:a("#billing_number").val(),neighborhood:a("#billing_neighborhood").val(),city:a("#billing_city").val(),state:a("#billing_state").val(),zipcode:e(a("#billing_postcode").val()),country:a("#billing_country").val().toLowerCase()},b.name=a.trim(a("#billing_first_name").val()+" "+a("#billing_last_name").val()),b}return!1}function k(){if(d(a("#shipping_address_1"))){var b={};return b.address={street:a("#shipping_address_1").val(),street_number:a("#shipping_number").val(),neighborhood:a("#shipping_neighborhood").val(),city:a("#shipping_city").val(),state:a("#shipping_state").val(),zipcode:e(a("#shipping_postcode").val()),country:a("#shipping_country").val().toLowerCase()},d(a("#shipping_address_2"))&&(b.address.complementary=a("#shipping_address_2").val()),b.name=a.trim(a("#shipping_first_name").val()+" "+a("#shipping_last_name").val()),b}return!1}function l(){if(c())return!0;var b,d,e,g=a("form.checkout, form#order_review"),h=a("#pagarme-checkout-params",g);return b=new PagarMeCheckout.Checkout({encryption_key:wcPagarmeParams.encryptionKey,success:function(b){m=!0,a("input[name=pagarme_checkout_token]",g).remove(),g.append(a('<input name="pagarme_checkout_token" type="hidden" />').val(b.token)),g.submit()}}),d=wcPagarmeParams.checkoutPayPage?wcPagarmeParams.transactionFields:f(g),e=a.extend({},{paymentMethods:"credit_card",customerData:!1,amount:h.data("total"),createToken:!0,interestRate:wcPagarmeParams.interestRate,maxInstallments:h.data("max_installment"),freeInstallments:wcPagarmeParams.freeInstallments,postbackUrl:wcPagarmeParams.postbackUrl,uiColor:wcPagarmeParams.uiColor},d),e.shipping&&!e.shipping.fee&&(e.shipping.fee=h.data("fee")),e.items||(e.items=h.data("items")),b.open(e),!1}var m=!1;a("form.checkout").on("click","#place_order",function(){return l()}),a("form.checkout").on("checkout_place_order_pagarme-credit-card",{preservePagarmeCheckoutSubmitValue:!0},c),a("form#order_review").submit(function(){return l()})})}(jQuery);